[phases.setup]
nixPkgs = ["nodejs_22", "python3", "gcc", "gnumake", "pkg-config", "libtool", "autoconf", "automake", "libopus"]

[phases.install]
cmds = ["npm install --omit=dev --prefer-offline --no-audit --no-fund"]

[phases.build]
cmds = [
  "npm install --save-dev typescript @types/node",
  "npm run build",
  "npm prune --production"
]

[start]
cmd = "node dist/index.js"
